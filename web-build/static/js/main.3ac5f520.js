(()=>{"use strict";var e={9e3:(e,t,o)=>{o.r(t),o.d(t,{default:()=>je});var r=o(5671),a=o(3144),n=o(136),i=o(2963),s=o(1120),l=o(9526),d=o(4333),c=o(8363);o(3037),o(6039),o(4099);c.default.apps.length||c.default.initializeApp({apiKey:"AIzaSyB6BbEHdeZpWAKxgyTOxhu-173JoOIEjXc",authDomain:"house-hold-chores-app.firebaseapp.com",databaseURL:"https://house-hold-chores-app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"house-hold-chores-app",storageBucket:"house-hold-chores-app.appspot.com",messagingSenderId:"448982541181",appId:"1:448982541181:web:d405e031d8ac0fdef8e214",measurementId:"G-81174C5G3L"});const u=c.default;var f=o(5693),h=o(1410),m=o(9245),p=o(5861),g=o(9233),b=o(3497),y=o(1133),v=o(1451),x=o(9899),w=o(196),j=o(7557);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}const R=function(e){(0,n.default)(i,e);var t=C(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.loginUser=function(){var e=(0,p.default)((function*(e,t){try{yield u.auth().signInWithEmailAndPassword(e,t),navigation.navigate("HomePage")}catch(r){return"auth/invalid-email"===r.code?void o.showModal("Invalid email address"):"auth/user-disabled"===r.code?void o.showModal("IUser account has been disabled"):"auth/user-not-found"===r.code?void o.showModal("User not found"):"auth/wrong-password"===r.code?void o.showModal("Incorrect password"):void o.showModal("Login failed. Please try again later")}}));return function(t,o){return e.apply(this,arguments)}}(),o.login=function(){if(o.validData()){var e=o.state,t=e.email,r=e.password;o.loginUser(t,r)}},o.validData=function(){var e=o.state,t=e.email,r=e.password;if(""!=t&&""!=r){if("string"==typeof t&&"string"==typeof r)return!0;o.showModal("Enter valid characters")}else o.showModal("Ensure no fields are empty")},o.state={email:"",password:"",isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"render",value:function(){var e=this,t=this.props.navigation;return(0,j.jsxs)(y.default,{style:M.container,children:[(0,j.jsx)(x.default,{source:o(6565),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5}}),(0,j.jsx)(g.default,{style:M.title,children:"Chores DO IT"}),(0,j.jsx)(b.default,{style:M.emailPasswordInput,placeholder:"Email",onChangeText:function(t){return e.setState({email:t})},value:this.state.email,placeholderTextColor:"gray"}),(0,j.jsx)(b.default,{style:M.emailPasswordInput,placeholder:"Password",onChangeText:function(t){return e.setState({password:t})},value:this.state.password,secureTextEntry:!0,placeholderTextColor:"gray"}),(0,j.jsx)(v.default,{style:M.loginButton,onPress:this.login,children:(0,j.jsx)(g.default,{children:"log in"})}),(0,j.jsx)(v.default,{style:M.createButton,onPress:function(){return t.navigate("SignUp")},children:(0,j.jsx)(g.default,{children:"Create Account"})}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:M.modal,children:(0,j.jsx)(g.default,{style:M.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component);var M=d.default.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"center",width:"100%",paddingTop:20,paddingHorizontal:20},title:{color:"black",fontSize:50,fontWeight:"bold",marginVertical:"5%"},emailPasswordInput:{borderWidth:1,borderColor:"gray",width:"100%",height:50,marginVertical:"2%",paddingHorizontal:5,color:"black"},loginButton:{marginVertical:10,padding:10,width:"75%",textAlign:"center",justifyContent:"center",backgroundColor:"#c8ada4",borderWidth:1,borderRadius:10,borderColor:"black"},createButton:{marginVertical:10,padding:10,width:"75%",textAlign:"center",justifyContent:"center",backgroundColor:"#c8ada4",borderWidth:1,borderRadius:10,borderColor:"black"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),S=o(8205),T=o.n(S);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}const I=function(e){(0,n.default)(i,e);var t=k(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.validateEmail=function(e){return T().isEmail(e)},o.validatePassword=function(e){return T().isStrongPassword(e)},o.registerUser=function(){var e=(0,p.default)((function*(e,t,r,a){try{var n=(yield u.auth().createUserWithEmailAndPassword(r,a)).user;return n?(yield u.firestore().collection("users").doc(n.uid).set({firstName:e,lastName:t,email:r,user_id:n.uid}),void o.showModal("User Created Successfully")):void o.showModal("User not created")}catch(i){if("auth/email-already-in-use"===i.code)return void o.showModal("Email already in use");if("auth/weak-password"===i.code)return void o.showModal("Password is too weak");console.log(i.message)}}));return function(t,o,r,a){return e.apply(this,arguments)}}(),o.signUp=(0,p.default)((function*(){var e=o.state,t=e.firstName,r=e.lastName,a=e.email,n=e.password;e.confirmPassword;if(o.setState({modalMessage:""}),o.validData())try{yield o.registerUser(t,r,a,n)}catch(i){console.log(i)}})),o.validData=function(){var e=o.state,t=e.firstName,r=e.lastName,a=e.email,n=e.password,i=e.confirmPassword;if(""!=t&&""!=r&&""!=a&&""!=n&&""!=i)if(o.validateEmail(a))if(o.validatePassword(n)){if(i==n)return!0;o.showModal("Passwords must match")}else o.showModal("Enter stronger password");else o.showModal("Email invalid format");else o.showModal("Ensure no fields are empty")},o.state={firstName:"",lastName:"",email:"",password:"",confirmPassword:"",isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"render",value:function(){var e=this;this.props.navigation;return(0,j.jsxs)(y.default,{style:P.container,children:[(0,j.jsx)(x.default,{source:o(6565),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5}}),(0,j.jsx)(g.default,{style:P.title,children:"Chores DO IT"}),(0,j.jsx)(b.default,{style:P.emailPasswordInput,placeholder:"Forename",onChangeText:function(t){return e.setState({firstName:t})},value:this.state.firstName,placeholderTextColor:"gray"}),(0,j.jsx)(b.default,{style:P.emailPasswordInput,placeholder:"Surname",onChangeText:function(t){return e.setState({lastName:t})},value:this.state.lastName,placeholderTextColor:"gray"}),(0,j.jsx)(b.default,{style:P.emailPasswordInput,placeholder:"Email",onChangeText:function(t){return e.setState({email:t})},value:this.state.email,placeholderTextColor:"gray"}),(0,j.jsx)(b.default,{style:P.emailPasswordInput,placeholder:"Password",onChangeText:function(t){return e.setState({password:t})},value:this.state.password,secureTextEntry:!0,placeholderTextColor:"gray"}),(0,j.jsx)(b.default,{style:P.emailPasswordInput,placeholder:"Confirm Password",onChangeText:function(t){return e.setState({confirmPassword:t})},value:this.state.confirmPassword,secureTextEntry:!0,placeholderTextColor:"gray"}),(0,j.jsx)(v.default,{style:P.loginButton,onPress:this.signUp,children:(0,j.jsx)(g.default,{children:"Sign Up"})}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:P.modal,children:(0,j.jsx)(g.default,{style:P.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component);var P=d.default.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"center",width:"100%",paddingTop:50,paddingHorizontal:20},title:{color:"black",fontSize:50,fontWeight:"bold",marginVertical:"5%"},emailPasswordInput:{borderWidth:1,borderColor:"gray",width:"100%",height:30,marginVertical:"2%",paddingHorizontal:5,color:"black"},loginButton:{marginVertical:10,padding:10,width:300,textAlign:"center",backgroundColor:"#c8ada4",borderWidth:1,borderRadius:10,borderColor:"black"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),D=o(4942),N=o(477),E=o(9566),B=o(1498);function U(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}const z=function(e){(0,n.default)(i,e);var t=O(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.getRooms=(0,p.default)((function*(){var e=u.auth().currentUser.uid;if(e){var t=u.firestore().collection("Rooms"),r=yield t.get(),a=[];r.forEach((function(e){var t=e.data(),o={id:e.id,roomName:t.roomName,members:t.members,roomURL:t.roomUrl,createdBy:t.createdBy,createdAt:t.createdAt};a.push(o)}));try{for(var n=0;n<a.length;n++){var i=a[n];i.members.includes(e)&&o.state.userRoom.push(i)}o.setState({userRoom:o.state.userRoom}),console.log(o.state.userRoom),yield o.getChoresData()}catch(s){return void o.showModal("Error displaying room: ",s)}}else o.showModal("User is not authenticated")})),o.getChoresData=(0,p.default)((function*(){try{if(!u.auth().currentUser.uid)return void o.showModal("User is not authenticated");if(0===o.state.userRoom.length)return void o.setState({chores:[]});var e=o.state.userRoom[0].id,t=u.firestore().collection("Rooms").doc(e).collection("tasks"),r=(yield t.get()).docs.map(function(){var e=(0,p.default)((function*(e){var t=e.data().currentlyAssignedTo;if(t){var o=(yield u.firestore().collection("users").doc(t).get()).data(),r=o.firstName,a=o.lastName;return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?U(Object(o),!0).forEach((function(t){(0,D.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({id:e.id,firstName:r,lastName:a},e.data())}}));return function(t){return e.apply(this,arguments)}}()),a=yield Promise.all(r);o.setState({chores:a.filter((function(e){return void 0!==e}))})}catch(n){return void o.showModal("Error displaying chores:",n)}})),o.handleChoreCheck=function(e){var t=u.auth().currentUser.uid;if(t){var r=o.state.userRoom[0].id;u.firestore().collection("Rooms").doc(r).collection("tasks").where("taskId","==",e.id).get().then((function(e){e.forEach((function(e){var r=e.data();r.currentlyAssignedTo===t?e.ref.update({lastCompletedAt:u.firestore.FieldValue.serverTimestamp(),lastCompletedBy:r.currentlyAssignedTo,currentlyAssignedTo:""}).then((function(){o.getChoresData()})).catch((function(e){o.showModal("Error updating chore")})):o.showModal("Chore is not assigned to the current user")}))})).catch((function(e){o.showModal("Error please try later: ",e)}))}else o.showModal("User is not authenticated")},o.leaveRoom=function(){var e=(0,p.default)((function*(e){try{var t=u.auth().currentUser.uid;if(!t)return void o.showModal("User is not authenticated");var r=u.firestore().collection("Rooms").doc(e),a=r.collection("tasks");yield r.update({members:u.firestore.FieldValue.arrayRemove(t)}),(yield a.where("currentlyAssignedTo","==",t).get()).forEach((function(e){e.ref.update({currentlyAssignedTo:""})})),o.showModal("You have left the room"),o.setState({userRoom:[],chores:[]}),o.getRooms()}catch(n){return void o.showModal("Error leaving room: ")}}));return function(t){return e.apply(this,arguments)}}(),o.state={name:"",userRoom:[],chores:[],updatedChores:[],isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"componentDidMount",value:function(){var e=this,t=u.auth().currentUser.uid;u.firestore().collection("users").doc(t).get().then((function(t){t.exists?(e.setState({name:t.data()}),e.getRooms()):e.showModal("User not found")})),this.interval=setInterval((function(){return e.getChoresData()}),8e3),this.unsubscribe=u.auth().onAuthStateChanged((function(t){e.unsubscribe=e.props.navigation.addListener("focus",(function(){if(e.getRooms(),!t)return e.showModal("User signed out"),void navigation.navigate("Login")}))}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),this.unsubscribe()}},{key:"render",value:function(){var e=this,t=(this.props.navigation,this.state.userRoom.length>0);return(0,j.jsxs)(N.default,{style:A.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsx)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"8%",borderWidth:1,borderColor:"black",borderRadius:20},children:(0,j.jsx)(y.default,{style:A.houseName,children:(0,j.jsx)(g.default,{style:A.houseNameText,children:this.state.userRoom.length>0?this.state.userRoom[0].roomName:""})})}),(0,j.jsxs)(y.default,{style:{paddingBottom:40,paddingTop:15,borderBottomWidth:1,borderColor:"black"},children:[(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.navigate("CreateRoom")},children:(0,j.jsx)(x.default,{source:o(9156),style:{position:"absolute",width:"8%",height:"5%",top:0,right:0,paddingHorizontal:20,paddingVertical:20,marginRight:130}})}),(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.navigate("JoinRoomByName")},children:(0,j.jsx)(x.default,{source:o(3407),style:{position:"absolute",width:"8%",height:"5%",top:0,right:0,paddingHorizontal:20,paddingVertical:20,marginRight:70}})}),(0,j.jsx)(v.default,{disabled:!t,onPress:function(){return e.leaveRoom(e.state.userRoom[0].id)},children:(0,j.jsx)(x.default,{source:o(4497),style:{position:"absolute",width:"8%",height:"5%",top:0,right:0,paddingHorizontal:20,paddingVertical:20,marginRight:20}})})]}),(0,j.jsx)(y.default,{style:A.dataContainer,children:(0,j.jsx)(E.default,{data:this.state.chores,keyExtractor:function(e){return e.id},renderItem:function(t){var o=t.item;return(0,j.jsxs)(y.default,{style:A.choreContainer,children:[(0,j.jsxs)(y.default,{style:[A.choreName],children:[(0,j.jsx)(g.default,{style:[A.choreNameText],children:o.choreName}),(0,j.jsx)(g.default,{style:[A.choreDescText],children:o.choreDesc}),(0,j.jsxs)(g.default,{style:A.assignedToText,children:["Assigned to: ",o.firstName," ",o.lastName]})]}),(0,j.jsx)(y.default,{children:(0,j.jsx)(v.default,{style:A.completeButton,onPress:function(){return e.handleChoreCheck(o)},children:(0,j.jsx)(B.default,{name:"check-box",size:30})})})]})}})}),(0,j.jsxs)(y.default,{style:{position:"absolute",bottom:0,width:"100%",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[(0,j.jsx)(v.default,{style:A.ViewStyle,disabled:!t,onPress:function(){return e.props.navigation.navigate("ViewAllChores")},children:(0,j.jsx)(x.default,{source:o(1958),style:A.imageStyle})}),(0,j.jsx)(v.default,{style:A.addStyle,disabled:!t,onPress:function(){return e.props.navigation.navigate("AssignChore")},children:(0,j.jsx)(x.default,{style:A.addimageStyle,source:o(696)})})]}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:A.modal,children:(0,j.jsx)(g.default,{style:A.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component);var A=d.default.create({container:{flex:1,backgroundColor:"white",width:"100%",borderWidth:1,borderColor:"black",borderRadius:20,backgroundColor:"#F8F8F8"},houseName:{width:"100%",paddingLeft:20,marginTop:15,paddingBottom:10},houseNameText:{color:"black",fontSize:30,fontWeight:"bold"},dataContainer:{width:"100%",height:"70%"},choreContainer:{alignItems:"flex-start",marginBottom:0,paddingTop:20,paddingLeft:20,flexDirection:"row",justifyContent:"space-between",width:"100%"},choreName:{width:"90%"},choreNameText:{fontSize:20,fontWeight:"bold",width:"100%",paddingBottom:1},choreDescText:{fontSize:15,width:"100%",paddingBottom:4},assignedToText:{fontSize:15,width:"100%",paddingBottom:4},completeButton:{alignItems:"flex-end",justifyContent:"center",paddingRight:20},ViewStyle:{marginLeft:50,marginBottom:10},addStyle:{marginRight:50,marginBottom:10},addimageStyle:{width:70,height:70},imageStyle:{width:60,height:60},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}});function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}const F=function(e){(0,n.default)(i,e);var t=V(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.validateEmail=function(e){return T().isEmail(e)},o.getInfo=(0,p.default)((function*(){var e=u.auth().currentUser.uid;if(e){var t=u.firestore().collection("users").doc(e),r=(yield t.get()).data();o.setState({firstName:r.firstName,lastName:r.lastName,email:r.email})}else o.showModal("User is not authenticated")})),o.updateInfo=(0,p.default)((function*(){u.auth().currentUser.uid?o.state.firstName&&o.state.lastName&&o.state.email?o.validateEmail(o.state.email)?u.firestore().collection("users").doc(u.auth().currentUser.uid).update({firstName:o.state.firstName,lastName:o.state.lastName,email:o.state.email}).then((function(){o.showModal("Update Complete")})).catch((function(e){console.log(e),o.showModal("Error updating user data")})):o.showModal("Email invalid format"):o.showModal("Ensure no fields are empty"):o.showModal("User is not authenticated")})),o.state={firstName:"",lastName:"",email:"",user:null,users:[],loading:!0,error:null,isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"componentDidMount",value:function(){this.getInfo()}},{key:"render",value:function(){var e=this;this.props.navigation;return(0,j.jsxs)(y.default,{style:W.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsx)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"8%",borderWidth:1,borderColor:"black",borderRadius:20},children:(0,j.jsx)(g.default,{style:W.headerText,children:"Chores Do it"})}),(0,j.jsxs)(y.default,{style:{paddingTop:"50%",paddingHorizontal:"5%"},children:[(0,j.jsx)(b.default,{style:W.inputBox,placeholder:"First Name",placeholderTextColor:"gray",onChangeText:function(t){return e.setState({firstName:t})},value:this.state.firstName}),(0,j.jsx)(b.default,{style:W.inputBox,placeholder:"Last Name",placeholderTextColor:"gray",onChangeText:function(t){return e.setState({lastName:t})},value:this.state.lastName}),(0,j.jsx)(b.default,{style:W.inputBox,placeholder:"Email",placeholderTextColor:"gray",onChangeText:function(t){return e.setState({email:t})},value:this.state.email}),(0,j.jsxs)(y.default,{children:[(0,j.jsx)(v.default,{style:W.buttonDesign,onPress:function(){return e.updateInfo()},children:(0,j.jsx)(g.default,{style:W.buttonDesignText,children:"Update"})}),(0,j.jsx)(v.default,{style:W.buttonDesign,onPress:function(){u.auth().signOut().then((function(){console.log("Logout successful")})).catch((function(t){e.setState({isModalVisible:!0,modalMessage:"Logout failed",error:t}),setTimeout((function(){e.setState({isModalVisible:!1})}),2e3)}))},children:(0,j.jsx)(g.default,{style:W.buttonDesignText,children:"Logout"})})]})]}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:W.modal,children:(0,j.jsx)(g.default,{style:W.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component);var W=d.default.create({container:{flex:1,width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:20},inputBox:{borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,width:"100%",height:50,marginTop:10,fontSize:16},buttonDesign:{marginVertical:10,padding:10,width:"75%",textAlign:"center",justifyContent:"center",backgroundColor:"#c8ada4",borderColor:"black",backgroundColor:"#c8ada4",padding:10,borderRadius:5,width:"100%"},buttonDesignText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",textAlign:"center"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),L=o(586),H=o(5738);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var J=function(e){(0,n.default)(i,e);var t=_(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.createRoom=(0,p.default)((function*(){try{if(!u.auth().currentUser.uid)return void o.showModal("User is not authenticated");var e=u.auth().currentUser,t=o.state.roomName,r=(0,L.v4)(),a=u.firestore().collection("Rooms").doc(r);if(!t&&!n.empty)return void o.showModal("Enter a room name");var n=yield u.firestore().collection("Rooms").where("roomName","==",t).get();if(!n.empty)return void o.showModal("This room name is already taken");if(!(yield u.firestore().collection("Rooms").where("members","array-contains",e.uid).get()).empty)return void o.showModal("You are already in a room");yield u.firestore().runTransaction(function(){var n=(0,p.default)((function*(n){yield n.set(a,{roomName:t,createdAt:u.firestore.FieldValue.serverTimestamp(),id:r,createdBy:e.uid,members:[e.uid]});a.collection("tasks"),a.collection("shoppingList");o.showModal("Room created")}));return function(e){return n.apply(this,arguments)}}()),console.log("Room created successfully")}catch(i){return console.log(i.message),void o.showModal(i.message)}})),o.state={isLoading:!0,roomName:"",isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"render",value:function(){var e=this;return(0,j.jsxs)(y.default,{style:q.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsxs)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"7.5%",borderWidth:1,borderColor:"black",borderRadius:20},children:[(0,j.jsx)(g.default,{style:q.headerText,children:"Chores Do it"}),(0,j.jsx)(y.default,{style:q.Iconleft,children:(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.goBack()},children:(0,j.jsx)(H.default,{name:"arrow-back",size:24,color:"black"})})})]}),(0,j.jsxs)(y.default,{style:{paddingTop:"60%",paddingHorizontal:"5%"},children:[(0,j.jsx)(g.default,{style:q.title,children:"Enter room name"}),(0,j.jsx)(b.default,{style:q.Roomname,placeholder:"Room Name",onChangeText:function(t){return e.setState({roomName:t})},value:this.state.roomName,placeholderTextColor:"gray"}),(0,j.jsx)(v.default,{style:q.button,onPress:this.createRoom,children:(0,j.jsx)(g.default,{style:q.buttonText,children:"create room"})})]}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:q.modal,children:(0,j.jsx)(g.default,{style:q.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component),q=d.default.create({container:{flex:1,backgroundColor:"white",width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:50},Iconleft:{position:"absolute",top:0,left:0,marginLeft:15,marginTop:10},title:{paddingLeft:"30%",fontSize:18,fontWeight:"bold",marginBottom:10},Roomname:{borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,width:"100%",height:50,marginTop:10,paddingHorizontal:10,fontSize:16},button:{backgroundColor:"#c8ada4",padding:10,borderRadius:5,marginTop:10,width:"100%"},buttonText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",textAlign:"center"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),Y=o(1553),Q=o(3582);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var K=function(e){(0,n.default)(o,e);var t=G(o);function o(e){var a;return(0,r.default)(this,o),(a=t.call(this,e)).checkIsAvailablity=(0,p.default)((function*(){var e=yield Q.isAvailableAsync();a.setState({isAvailable:e})})),a.searchUsers=(0,p.default)((function*(){var e=a.state.searchQuery.toLowerCase(),t=[];(yield u.firestore().collection("users").get()).forEach((function(o){var r=o.data();(r.firstName.includes(e)||r.lastName.includes(e)||r.email.includes(e))&&t.push(r)})),a.setState({searchResults:t})})),a.sendEmail=function(e,t){var o=a.props.route.params.id,r=a.props.route.params.roomUrl+"/JoinRoom?roomId="+o+"&userId="+t;console.log("Sending email to:",e,"with URL:",r),Q.composeAsync({subject:"Join My Room",body:"Here's the room URL: "+r,recipients:[e]})},a.state={searchQuery:"",searchResults:[],isAvailable:!1},a}return(0,a.default)(o,[{key:"componentDidMount",value:function(){this.checkIsAvailablity()}},{key:"render",value:function(){var e=this;this.props.route.params;return(0,j.jsxs)(y.default,{style:$.container,children:[(0,j.jsx)(b.default,{style:$.input,placeholder:"Search for a user",onChangeText:function(t){return e.setState({searchQuery:t})}}),(0,j.jsx)(Y.default,{title:"Search",onPress:this.searchUsers}),(0,j.jsx)(E.default,{data:this.state.searchResults,renderItem:function(t){var o=t.item;return(0,j.jsx)(v.default,{onPress:function(){return e.sendEmail(o.email,o.user_id)},children:(0,j.jsxs)(g.default,{children:[o.firstName," ",o.lastName]})})}})]})}}]),o}(l.Component),$=d.default.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"center",width:"100%",paddingTop:20,paddingHorizontal:20}}),X=o(2727);const Z=function(){var e=(0,X.useRoute)().params,t=e.roomId,o=e.userId;return console.log("roomId:",t),console.log("userId:",o),(0,l.useEffect)((function(){o&&t&&u.firestore().collection("Rooms").doc(t).update({members:u.firestore.FieldValue.arrayUnion(o)}).then((function(){console.log("User added to the room")})).catch((function(e){console.log("Error adding user to the room: ",e)}))}),[t,o]),(0,j.jsx)(y.default,{children:(0,j.jsx)(g.default,{children:"Joining Room..."})})};function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var te=function(e){(0,n.default)(i,e);var t=ee(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.joinRoom=(0,p.default)((function*(){var e=o.state.roomName.trim();if(e){var t=u.firestore().collection("Rooms").where("members","array-contains",o.state.user_id);if((yield t.get()).empty){var r=u.firestore().collection("Rooms"),a=yield r.where("roomName","==",e).get();if(a.empty)o.showModal("Room not found");else{var n=a.docs[0].id,i=r.doc(n),s=yield i.get();if(s.exists){var l=s.data().members;if(l.includes(o.state.user_id))o.showModal("You have already joined this room");else{l.push(o.state.user_id);try{yield i.update({members:l}),o.showModal(e+" joined successfully")}catch(d){console.error(d),o.showModal(d.message)}}}else o.showModal("Error joining room")}}else o.showModal("You cannot join another room while being in a room")}else o.showModal("Please enter a room name")})),o.state={roomName:"",user_id:u.auth().currentUser.uid,isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"render",value:function(){var e=this;return(0,j.jsxs)(y.default,{style:oe.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsxs)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"7.5%",borderWidth:1,borderColor:"black",borderRadius:20},children:[(0,j.jsx)(g.default,{style:oe.headerText,children:"Chores Do it"}),(0,j.jsx)(y.default,{style:oe.Iconleft,children:(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.goBack()},children:(0,j.jsx)(H.default,{name:"arrow-back",size:24,color:"black"})})})]}),(0,j.jsxs)(y.default,{style:{paddingTop:"60%",paddingHorizontal:"5%"},children:[(0,j.jsx)(g.default,{style:oe.title,children:" Join a room"}),(0,j.jsx)(b.default,{style:oe.roomInput,placeholder:"Room name",onChangeText:function(t){return e.setState({roomName:t})},value:this.state.roomName}),(0,j.jsx)(v.default,{style:oe.button,onPress:this.joinRoom,children:(0,j.jsx)(g.default,{style:oe.buttonText,children:"Join Room"})})]}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:oe.modal,children:(0,j.jsx)(g.default,{style:oe.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component),oe=d.default.create({container:{flex:1,backgroundColor:"white",width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:50},Iconleft:{position:"absolute",top:0,left:0,marginLeft:15,marginTop:10},roomInput:{borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,width:"100%",height:50,marginTop:10,paddingHorizontal:10,fontSize:16},title:{paddingLeft:"35%",fontSize:18,fontWeight:"bold",marginBottom:10},button:{backgroundColor:"#c8ada4",padding:10,borderRadius:5,marginTop:10,width:"100%"},buttonText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",textAlign:"center"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),re=o(6245);function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var ne=function(e){(0,n.default)(i,e);var t=ae(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.getRooms=(0,p.default)((function*(){try{var e=u.auth().currentUser.uid;if(!e)return void o.showModal("User is not authenticated");var t=u.firestore().collection("Rooms"),r=yield t.get(),a=[],n=[];r.forEach(function(){var t=(0,p.default)((function*(t){var r=t.data(),i={id:t.id,roomName:r.roomName,members:r.members,roomURL:r.roomUrl,createdBy:r.createdBy,createdAt:r.createdAt};if(a.push(i),i.members.includes(e)){n.push(i);for(var s=[],l=[],d=0;d<i.members.length;d++){var c=i.members[d],f=u.firestore().collection("users").doc(c),h=(yield f.get()).data();l.push(h.user_id),s.push(h.firstName+" "+h.lastName)}o.setState({members:s}),o.setState({membersId:l})}}));return function(e){return t.apply(this,arguments)}}()),o.setState({userRoom:n})}catch(i){o.setState({isModalVisible:!0,modalMessage:i.message}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)}})),o.createTask=(0,p.default)((function*(){var e=o.state.userRoom[0],t=o.state.selectedMember;if(u.auth().currentUser.uid)if(o.state.choreName)if(o.state.choreDesc.length>250)o.showModal("Chore description can not exceed 250 characters");else if(t){var r=(0,L.v4)(),a={choreName:o.state.choreName,choreDesc:o.state.choreDesc,createdBy:u.auth().currentUser.uid,currentlyAssignedTo:t,lastCompletedBy:"",lastCompletedAt:"",roomId:e.id,taskId:r,createdAt:u.firestore.FieldValue.serverTimestamp(),taskId:r},n=u.firestore().collection("Rooms").doc(e.id).collection("tasks");try{return yield n.doc(r).set(a),o.showModal("Chore assigned successfully"),void o.setState({choreName:"",choreDesc:"",selectedMember:""})}catch(i){o.setState({isModalVisible:!0,modalMessage:i})}}else o.showModal("Select a member to assign a chore");else o.showModal("Enter a chore name");else o.showModal("User is not authenticated")})),o.state={choreName:"",choreDesc:"",userRoom:[],members:[],membersId:[],selectedMember:"",isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"componentDidMount",value:function(){this.getRooms()}},{key:"render",value:function(){var e=this;return(0,j.jsxs)(y.default,{style:ie.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsxs)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"7.5%",borderWidth:1,borderColor:"black",borderRadius:20},children:[(0,j.jsx)(g.default,{style:ie.headerText,children:"Chores Do it"}),(0,j.jsx)(y.default,{style:ie.Iconleft,children:(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.goBack()},children:(0,j.jsx)(H.default,{name:"arrow-back",size:24,color:"black"})})})]}),(0,j.jsxs)(y.default,{style:{paddingTop:"50%",paddingHorizontal:"5%"},children:[(0,j.jsx)(b.default,{style:ie.input,placeholder:"Enter chore name",onChangeText:function(t){return e.setState({choreName:t})},value:this.state.choreName}),(0,j.jsx)(b.default,{style:ie.input,placeholder:"Enter chore description",onChangeText:function(t){return e.setState({choreDesc:t})},value:this.state.choreDesc}),(0,j.jsxs)(re.default,{style:ie.picker,selectedValue:this.state.selectedMember,onValueChange:function(t){return e.setState({selectedMember:t})},children:[(0,j.jsx)(re.default.Item,{label:"Select a member",value:null}),this.state.members.map((function(t,o){return(0,j.jsx)(re.default.Item,{label:t,value:e.state.membersId[o]},o)}))]}),(0,j.jsx)(v.default,{style:ie.button,onPress:this.createTask,children:(0,j.jsx)(g.default,{style:ie.buttonText,children:"Assign Chore"})})]}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:ie.modal,children:(0,j.jsx)(g.default,{style:ie.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component),ie=d.default.create({container:{flex:1,backgroundColor:"white",width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:50},Iconleft:{position:"absolute",top:0,left:0,marginLeft:15,marginTop:10},input:{borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,width:"100%",height:50,marginTop:10,paddingHorizontal:10,fontSize:16},picker:{width:"100%",marginTop:10,borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,height:50,backgroundColor:"transparent"},button:{backgroundColor:"#c8ada4",padding:10,borderRadius:5,marginTop:10,width:"100%"},buttonText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",textAlign:"center"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),se=o(2982);function le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var ce=function(e){(0,n.default)(i,e);var t=de(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.getRooms=(0,p.default)((function*(){var e=u.auth().currentUser.uid;if(e){var t=u.firestore().collection("Rooms");try{var r=yield t.get(),a=[],n=[];for(var i of r.docs){var s=i.data(),l={id:i.id,roomName:s.roomName,members:s.members,roomURL:s.roomUrl,createdBy:s.createdBy,createdAt:s.createdAt};if(a.push(l),l.members.includes(e)){n.push(l);for(var d=[],c=[],f=0;f<l.members.length;f++){var h=l.members[f],m=u.firestore().collection("users").doc(h),p=(yield m.get()).data();c.push(p.user_id),d.push(p.firstName+" "+p.lastName)}o.setState({members:d}),o.setState({membersId:c})}}for(var g=0;g<a.length;g++){var b=a[g];b.members.includes(e)&&o.state.userRoom.push(b)}return o.setState({userRoom:o.state.userRoom}),o.getChoresData()}catch(y){return void o.showModal("Error displaying room:",y)}}else o.showModal("User is not authenticated")})),o.getChoresData=(0,p.default)((function*(){var e=o.state.userRoom[0].id,t=u.firestore().collection("Rooms").doc(e).collection("tasks");if(u.auth().currentUser.uid)try{var r=yield t.get(),a=[],n=[],i=[];r.forEach((function(e){var t=e.data();a.push(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?le(Object(o),!0).forEach((function(t){(0,D.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({id:e.id},e.data())),n.push(t.choreName),i.push(t.choreDesc)})),o.setState({chores:a,choreNameArr1:n,choreDescArr1:i}),console.log("chore name",n),console.log("chore desc",i),console.log("Chores:",a)}catch(s){return void o.showModal("Error getting chores: ",s)}else o.showModal("User is not authenticated")})),o.reassignChore=function(){var e=(0,p.default)((function*(e){if(u.auth().currentUser.uid){var t,r,a=o.state.userRoom[0].id,n=o.state.selectedMember;if(e.lastCompletedAt)t=e.lastCompletedAt.toDate(),r=(new Date-t)/36e5;if(r&&r<24)return console.log("Cannot reassign chore until 24 hours have passed since it was last completed"),void o.showModal("Cannot reassign chore until 24 hours have passed since it was last completed");u.firestore().collection("Rooms").doc(a).collection("tasks").where("taskId","==",e.id).get().then((function(e){e.forEach((function(e){u.firestore().collection("Rooms").doc(a).collection("tasks").doc(e.id).update({currentlyAssignedTo:n}).then((function(){o.showModal("Chore reassigned successfully:")})).catch((function(e){o.showModal("Error reassigning chore: ",e)}))}))})).catch((function(e){console.error("Error: ",e)}))}else o.showModal("User is not authenticated")}));return function(t){return e.apply(this,arguments)}}(),o.updateChoreData=function(){var e=(0,p.default)((function*(e,t,r){if(u.auth().currentUser.uid)try{var a=o.state.userRoom[0].id,n=e.taskId;u.firestore().collection("Rooms").doc(a).collection("tasks").doc(n).update({choreName:t,choreDesc:r}).then((function(){o.showModal("Chore details updated")})).catch((function(e){o.showModal("Error updating chore: ",e)}))}catch(i){return void o.showModal("Error: ",i)}else o.showModal("User is not authenticated")}));return function(t,o,r){return e.apply(this,arguments)}}(),o.deleteChore=function(){var e=(0,p.default)((function*(e){var t=u.auth().currentUser.uid;if(t)try{console.log(t);var r=o.state.userRoom[0].id,a=e.taskId,n=u.firestore().collection("Rooms").doc(r).collection("tasks").doc(a);return yield n.delete(),o.getChoresData(),void o.showModal("Chore removed")}catch(i){return void o.showModal("Error deleting chat: ",i)}else o.showModal("User is not authenticated")}));return function(t){return e.apply(this,arguments)}}(),o.state={name:"",userRoom:[],chores:[],members:[],membersId:[],selectedMember:"",choreNameArr1:[],choreDescArr1:[],isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"componentDidMount",value:function(){this.getRooms()}},{key:"render",value:function(){var e=this;return(0,j.jsxs)(y.default,{style:ue.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsxs)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"5%",borderWidth:1,borderColor:"black",borderRadius:20},children:[(0,j.jsx)(g.default,{style:ue.headerText,children:"Chores Do it"}),(0,j.jsx)(y.default,{style:ue.Iconleft,children:(0,j.jsx)(v.default,{onPress:function(){return e.props.navigation.goBack()},children:(0,j.jsx)(H.default,{name:"arrow-back",size:24,color:"black"})})})]}),(0,j.jsx)(y.default,{style:ue.dataContainer,children:(0,j.jsx)(E.default,{data:this.state.chores,renderItem:function(t){var o,r,a=t.item,n=t.index;return(0,j.jsxs)(y.default,{style:ue.choreContainer,children:[(0,j.jsx)(y.default,{style:ue.choreName,children:(0,j.jsx)(b.default,{style:ue.input,value:null!=(o=e.state.choreNameArr1[n])?o:"",onChangeText:function(t){var o=(0,se.default)(e.state.choreNameArr1);o[n]=t,e.setState({choreNameArr1:o})}})}),(0,j.jsx)(y.default,{style:ue.choreName,children:(0,j.jsx)(b.default,{style:ue.input,value:null!=(r=e.state.choreDescArr1[n])?r:"",onChangeText:function(t){var o=(0,se.default)(e.state.choreDescArr1);o[n]=t,e.setState({choreDescArr1:o})}})}),(0,j.jsx)(y.default,{style:ue.pickerPadding,children:(0,j.jsxs)(re.default,{style:ue.picker,selectedValue:e.state.selectedMember,onValueChange:function(t){return e.setState({selectedMember:t})},children:[(0,j.jsx)(re.default.Item,{label:"Select a member",value:null}),e.state.members.map((function(t,o){return(0,j.jsx)(re.default.Item,{label:t,value:e.state.membersId[o]},o)}))]})}),(0,j.jsx)(v.default,{style:ue.updateDataButton,onPress:function(){e.state.selectedMember?e.reassignChore(a):console.log("Please select a member before reassigning the chore")},children:(0,j.jsx)(g.default,{style:ue.saveDataText,children:"Save chore reassignment"})}),(0,j.jsx)(v.default,{style:ue.updateDataButton,onPress:function(){return e.updateChoreData(a,e.state.choreNameArr1[n],e.state.choreDescArr1[n])},children:(0,j.jsx)(g.default,{style:ue.saveDataText,children:"Update chore"})}),(0,j.jsx)(v.default,{style:ue.deleteIcon,onPress:function(){return e.deleteChore(a)},children:(0,j.jsx)(B.default,{name:"delete",size:30})})]})},keyExtractor:function(e){return e.id}})}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:ue.modal,children:(0,j.jsx)(g.default,{style:ue.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component),ue=d.default.create({container:{flex:1,width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:50},Iconleft:{position:"absolute",top:0,left:0,marginLeft:15,marginTop:10},dataContainer:{width:"90%",flex:1,paddingLeft:40},choreContainer:{height:"100%"},input:{marginTop:15,paddingHorizontal:10,fontSize:16},picker:{width:"100%",marginTop:10,borderWidth:1,borderColor:"black",borderRadius:5,height:50,backgroundColor:"transparent"},choreName:{borderWidth:1,borderColor:"black",borderRadius:5,width:"100%",height:50,marginTop:10},pickerPadding:{width:"100%",height:50,paddingBottom:10},updateDataButton:{width:"100%",backgroundColor:"#DDDDDD",padding:10,marginTop:10,borderRadius:5},saveDataText:{textAlign:"center",fontSize:18,fontWeight:"600"},buttonStyles:{position:"absolute",top:0,right:0},deleteIcon:{marginRight:10,marginTop:10,paddingLeft:"40%"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}}),fe=o(3693);function he(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}const pe=function(e){(0,n.default)(i,e);var t=me(i);function i(e){var o;return(0,r.default)(this,i),(o=t.call(this,e)).closeModal=function(){o.setState({isModalVisible:!1})},o.showModal=function(e){o.setState({isModalVisible:!0,modalMessage:e}),setTimeout((function(){o.setState({isModalVisible:!1})}),2e3)},o.getRooms=(0,p.default)((function*(){var e=u.auth().currentUser.uid;if(e){var t=u.firestore().collection("Rooms");try{var r=yield t.get(),a=[],n=[];for(var i of r.docs){var s=i.data(),l={id:i.id,roomName:s.roomName,members:s.members,roomURL:s.roomUrl,createdBy:s.createdBy,createdAt:s.createdAt};if(a.push(l),l.members.includes(e)){n.push(l);for(var d=[],c=[],f=0;f<l.members.length;f++){var h=l.members[f],m=u.firestore().collection("users").doc(h),p=(yield m.get()).data();c.push(p.user_id),d.push(p.firstName+" "+p.lastName)}}}for(var g=0;g<a.length;g++){var b=a[g];b.members.includes(e)&&o.state.userRoom.push(b)}return o.setState({userRoom:o.state.userRoom}),o.getItemData()}catch(y){return void o.showModal("Error displaying room:",y)}}else o.showModal("User is not authenticated")})),o.addItem=(0,p.default)((function*(){var e=o.state.userRoom[0];if(console.log(e),u.auth().currentUser.uid)if(o.state.shoppingItem&&o.state.itemPrice)if(/^\d+(\.\d+)?$/.test(o.state.itemPrice)||/^\d+$/.test(o.state.itemPrice)){var t=(0,L.v4)(),r={shoppingItem:o.state.shoppingItem,itemPrice:o.state.itemPrice,createdBy:u.auth().currentUser.uid,shoppingItemId:t},a=u.firestore().collection("Rooms").doc(e.id).collection("shoppingList");try{return yield a.doc(t).set(r),o.showModal("Shopping item added successfully"),o.setState({shoppingItem:"",itemPrice:""}),void o.getItemData()}catch(n){o.setState({isModalVisible:!0,modalMessage:n})}}else o.showModal("Incorrect price");else o.showModal("All fields must be entered");else o.showModal("User is not authenticated")})),o.deleteItem=function(){var e=(0,p.default)((function*(e){if(u.auth().currentUser.uid)try{var t=o.state.userRoom[0].id,r=e.shoppingItemId,a=u.firestore().collection("Rooms").doc(t).collection("shoppingList").doc(r);return yield a.delete(),o.getItemData(),void o.showModal("Item removed")}catch(n){return void o.showModal("Error deleting chat: ",n)}else o.showModal("User is not authenticated")}));return function(t){return e.apply(this,arguments)}}(),o.getItemData=(0,p.default)((function*(){var e=o.state.userRoom[0];console.log(e);var t=u.firestore().collection("Rooms").doc(e.id).collection("shoppingList");if(u.auth().currentUser.uid)try{var r=yield t.get(),a=[];r.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?he(Object(o),!0).forEach((function(t){(0,D.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):he(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({id:e.id},e.data()))})),o.setState({items:a}),console.log("items: "+a)}catch(n){return void o.showModal("Error getting items: ",n)}else o.showModal("User is not authenticated")})),o.state={items:[],userRoom:[],shoppingItem:"",itemPrice:"",isModalVisible:!1,modalMessage:""},o}return(0,a.default)(i,[{key:"componentDidMount",value:function(){var e=this;this.getRooms(),this.interval=setInterval((function(){return e.getItemData()}),8e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;this.props.navigation;return(0,j.jsxs)(y.default,{style:ge.container,children:[(0,j.jsx)(x.default,{source:o(9872),style:{position:"absolute",zIndex:-1,width:"100%",height:"100%",opacity:.5,borderRadius:20}}),(0,j.jsx)(y.default,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FEFFEB",height:"8%",borderWidth:1,borderColor:"black",borderRadius:20},children:(0,j.jsx)(g.default,{style:ge.headerText,children:"Chores Do it"})}),(0,j.jsxs)(y.default,{style:ge.inputContainer,children:[(0,j.jsx)(b.default,{style:ge.inputBoxItem,placeholder:"Items",placeholderTextColor:"gray",onChangeText:function(t){return e.setState({shoppingItem:t})},value:this.state.shoppingItem}),(0,j.jsx)(b.default,{style:ge.inputBoxPrice,placeholder:"\xa3",placeholderTextColor:"gray",onChangeText:function(t){return e.setState({itemPrice:t})},value:this.state.itemPrice}),(0,j.jsx)(v.default,{onPress:this.addItem,style:ge.addButton,children:(0,j.jsx)(g.default,{style:ge.addButtonLabel,children:"Add"})})]}),(0,j.jsx)(y.default,{style:ge.dataContainer,children:(0,j.jsx)(fe.FlatList,{data:this.state.items,renderItem:function(t){var o=t.item;return(0,j.jsx)(y.default,{style:ge.itemContainer,children:(0,j.jsxs)(y.default,{style:ge.itemInfo,children:[(0,j.jsx)(g.default,{style:ge.itemName,children:o.shoppingItem}),(0,j.jsxs)(g.default,{style:ge.itemPrice,children:[" \xa3",o.itemPrice]}),(0,j.jsx)(v.default,{style:ge.deleteIcon,onPress:function(){return e.deleteItem(o)},children:(0,j.jsx)(B.default,{name:"delete",size:30})})]})})},keyExtractor:function(e){return e.id}})}),(0,j.jsx)(w.default,{transparent:!0,visible:this.state.isModalVisible,animationType:"slide",onRequestClose:function(){e.closeModal()},children:(0,j.jsx)(y.default,{style:ge.modal,children:(0,j.jsx)(g.default,{style:ge.modalText,children:this.state.modalMessage})})})]})}}]),i}(l.Component);var ge=d.default.create({container:{flex:1,width:"100%",borderWidth:1,borderColor:"black",borderRadius:20},headerText:{color:"black",fontSize:30,fontWeight:"600",marginLeft:20},inputContainer:{paddingTop:"2%",paddingHorizontal:"5%"},inputBoxItem:{borderWidth:1,borderColor:"black",borderRadius:5,height:50,marginTop:10,fontSize:16,paddingHorizontal:10},inputBoxPrice:{borderWidth:1,borderColor:"black",borderRadius:5,width:"20%",height:50,marginTop:10,fontSize:16,paddingHorizontal:10},addButton:{backgroundColor:"#FEFFEB",borderRadius:5,height:50,marginTop:10,justifyContent:"center",alignItems:"center"},addButtonLabel:{color:"black",fontSize:16,fontWeight:"600"},dataContainer:{flex:1,paddingTop:"2%",paddingHorizontal:"5%"},itemContainer:{backgroundColor:"#FEFFEB",borderRadius:5,paddingHorizontal:10,paddingVertical:10,marginBottom:10},itemInfo:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},itemName:{fontSize:16,fontWeight:"600"},itemPrice:{fontSize:14,color:"gray"},deleteIcon:{marginRight:10,marginTop:10,paddingLeft:"40%"},modalContainer:{justifyContent:"center",alignItems:"center"},modalText:{color:"white",fontSize:15,fontWeight:"bold",textAlign:"center",padding:20,backgroundColor:"#E2C2C6",borderRadius:10}});function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return(0,i.default)(this,o)}}var ye=(0,h.default)(),ve=(0,m.default)(),xe=function(){return(0,j.jsxs)(ve.Navigator,{children:[(0,j.jsx)(ve.Screen,{name:"HomePage",component:z,options:{headerShown:!1}}),(0,j.jsx)(ve.Screen,{name:"ShoppingList",component:pe,options:{headerShown:!1}}),(0,j.jsx)(ve.Screen,{name:"Profile",component:F,options:{headerShown:!1}})]})},we=function(e){(0,n.default)(o,e);var t=be(o);function o(e){var a;return(0,r.default)(this,o),(a=t.call(this,e)).state={initialising:!0,user:null},a}return(0,a.default)(o,[{key:"componentDidMount",value:function(){var e=this;this.authSubscriber=u.auth().onAuthStateChanged((function(t){e.setState({user:t,initialising:!1})}))}},{key:"componentWillUnmount",value:function(){this.authSubscriber()}},{key:"render",value:function(){var e=this.state,t=e.initialising,o=e.user;return t?null:o?o&&this.state.registered?(0,j.jsx)(f.default,{children:(0,j.jsxs)(ye.Navigator,{initialRouteName:"Login",children:[(0,j.jsx)(ye.Screen,{name:"Login",component:R,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"SignUp",component:I,options:{headerShown:!1}})]})}):(0,j.jsx)(f.default,{children:(0,j.jsxs)(ye.Navigator,{initialRouteName:"HomeTab",children:[(0,j.jsx)(ye.Screen,{name:"HomeTab",component:xe,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"CreateRoom",component:J,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"SearchUser",component:K,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"JoinRoom",component:Z,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"JoinRoomByName",component:te,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"AssignChore",component:ne,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"ViewAllChores",component:ce,options:{headerShown:!1}})]})}):(0,j.jsx)(f.default,{children:(0,j.jsxs)(ye.Navigator,{initialRouteName:"Login",children:[(0,j.jsx)(ye.Screen,{name:"Login",component:R,options:{headerShown:!1}}),(0,j.jsx)(ye.Screen,{name:"SignUp",component:I,options:{headerShown:!1}})]})})}}]),o}(l.Component);d.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});const je=we},9872:(e,t,o)=>{e.exports=o.p+"static/media/inAppColour.2cea223441c7345a0b43.avif"},6565:(e,t,o)=>{e.exports=o.p+"static/media/BackgroundNew.056909a79d664d36352c.jpg"},3407:(e,t,o)=>{e.exports=o.p+"static/media/JoinHouse.37dabb55dc7b735036c0.png"},1958:(e,t,o)=>{e.exports=o.p+"static/media/ViewAll.13e879c209cf6a5ea4da.png"},9156:(e,t,o)=>{e.exports=o.p+"static/media/create.cde8cd71efec437872f5.png"},4497:(e,t,o)=>{e.exports=o.p+"static/media/leaveRoom.3ba2d7dee83d2516d231.png"},696:(e,t,o)=>{e.exports=o.p+"static/media/pluscircle.0366d599d2c8acffdc57.png"}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,(()=>{var e=[];o.O=(t,r,a,n)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,a,n]=e[c],s=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(s=!1,n<i&&(i=n));if(s){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,a,n]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[i,s,l]=r,d=0;if(i.some((t=>0!==e[t]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(l)var c=l(o)}for(t&&t(r);d<i.length;d++)n=i[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[346],(()=>o(9484)));r=o.O(r)})();
//# sourceMappingURL=main.3ac5f520.js.map